// Purpose:	check if  'Reserve'  and 'Prediction'  are computed and displayed correctly under all circumstances.
//			Reserve is the number of chunks left in the rotating buffer which give an interruption time for Windows without hurting the acquisition.
//			Prediction gives an early estimate whether a long script will finally succeed or fail when the sampling conditions are at the limit.
// Usage:	
//			Copy this script using 'Save as'
//			Edit the script by selecting the desired AD channels, telegraph channels and sample rate
//			Adjust the number frames so that the total duration approximately matches your real protocol
//				or use integral multiples of the given ramp time 	 
//				If you increase the number of frames you will have to decrease the automatic increment proportionally to avoid an overrange
//			Connect 5V to  ADC5 and ADC6  (telegraph input)
//			Connect ADC0  to an oscilloscope   and  to  DAC0  to watch internal the stimulus ramps 
//			Connect ADC2  to an oscilloscope   and  to a very slowly varying ramp or sine wave (appr. .015 Hz and appr. 0..10V or -10..+10V)
//			To achieve maximum speed:
//				turn (most or all) acquisition windows off
//				turn  'Display all data even when lagging'	 off 
//				turn  'High resolution during acquisition'	 off 
//				turn  'Quick check (after acq, TG)'	on
//				turn  'Show timing statistics'		on
//			'Start'  the acquisition
//			Watch out for warnings or errors displayed in Igors history window
//			Watch the 'Reserve' indicator and the 'Prediction' indicator.
//			After the acquistion:
//				Look for irregularities in the 'Quick check' window (works only for 1 protocol) 
//				'Display raw data'  and look for irregularities (works only for 1 protocol) 
//				'ReadCfs' , 'Protocol', 'Current Acq' : look for irregularities and compare to the indicators.				
//
//	Use Frame numbers of 1 , 2 , 3 , 4,   17 (Reps=1) , 18 (Reps=2)  in conjunction with Protocol numbers of 1 , 2 , 3 , 4
//	INCREASE ALSO the NUMBER OF PROTOCOLS !
//	The scripts 'DemoReservePred25us' (SR at the limit)  and  'DemoReservePred50us' (slow and easy) are to be used together.

PULSE	
Protocol:	Name	= "DemoReservePred25us"
Dac:		Chan = 0;		SmpInt = 25; Gain=1
Adc:		Chan = 0;		SmpInt = 25; TGChan=5
Adc:		Chan = 2;		SmpInt = 25; TGChan=6
Adc:		Chan = 3;		SmpInt = 25; TGChan=7
Adc:		Chan = 1;	

Frames:	N	=5	// 2 = 1rep, 5=2rep
Sweeps:	N	=1         
Ramp:	Dac	= 0, 1108.8;	Amp	=    -9800,1,160 // time 1108.800ms allows SI 14,15,16,18,20,21,22,24,25
Ramp:	Dac	= 0, 1108.8;	Amp	=    0
EndSweep
EndFrame 

